# Simulation Module - é–‹ç™ºè€…å‘ã‘å®Œå…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹Rustè£½WebAssemblyãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚WebGPUã‚’ä½¿ç”¨ã—ãŸé«˜é€Ÿãªæç”»ã¨ã€ãƒ‘ã‚±ãƒƒãƒˆã®ç”Ÿæˆãƒ»ç§»å‹•ãƒ»å‡¦ç†ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- ğŸ® **ãƒ‘ã‚±ãƒƒãƒˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: Gateway â†’ LB â†’ Server â†’ DB ã®çµŒè·¯ã§ãƒ‘ã‚±ãƒƒãƒˆã‚’å‡¦ç†
- ğŸ–¼ï¸ **WebGPUæç”»**: æœ€å¤§100,000ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®é«˜é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- âš¡ **è² è·ãƒ¢ãƒ‡ãƒ«**: ãƒãƒ¼ãƒ‰ã”ã¨ã®å‡¦ç†èƒ½åŠ›ãƒ»ã‚­ãƒ¥ãƒ¼å®¹é‡ãƒ»ãƒ‰ãƒ­ãƒƒãƒ—åˆ¤å®š
- ğŸ“Š **çµ±è¨ˆåé›†**: ç”Ÿæˆæ•°ãƒ»å‡¦ç†å®Œäº†æ•°ãƒ»ãƒ‰ãƒ­ãƒƒãƒ—æ•°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡
- ğŸŒŠ **Waveç”Ÿæˆ**: æ™‚é–“æŒ‡å®šã§ãƒ‘ã‚±ãƒƒãƒˆã‚’æ®µéšçš„ã«ç”Ÿæˆ

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
simulation/
â”œâ”€â”€ Cargo.toml              # Rustä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ README.md               # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãƒ»JS API
â”‚   â”œâ”€â”€ simulation.rs       # ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ renderer.rs         # WebGPUæç”»å‡¦ç†
â”‚   â””â”€â”€ shader.wgsl         # GPUã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ï¼ˆWGSLï¼‰
â”œâ”€â”€ pkg/                    # wasm-packãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆnpmç”¨ï¼‰
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ simulation.js       # JSã‚°ãƒ«ãƒ¼ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ simulation.d.ts     # TypeScriptå‹å®šç¾©
â”‚   â””â”€â”€ simulation_bg.wasm  # WASMãƒã‚¤ãƒŠãƒª
â””â”€â”€ web/pkg/                # Webç”¨ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆåˆ¥æ§‹æˆï¼‰
```

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        lib.rs (APIå±¤)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ wasm_bindgen APIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ                        â”‚    â”‚
â”‚  â”‚ - init_gpu(), render_frame()                            â”‚    â”‚
â”‚  â”‚ - create_simulation(), simulation_tick()                â”‚    â”‚
â”‚  â”‚ - load_stage_config(), trigger_waves_until()            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                     â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚          â–¼                                 â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  simulation.rs   â”‚            â”‚   renderer.rs    â”‚           â”‚
â”‚  â”‚ (ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)â”‚            â”‚  (WebGPUæç”»)   â”‚             â”‚
â”‚  â”‚                  â”‚            â”‚                  â”‚           â”‚
â”‚  â”‚ - Packetç®¡ç†     â”‚            â”‚ - GPUåˆæœŸåŒ–     â”‚          â”‚
â”‚  â”‚ - Nodeç®¡ç†       â”‚â”€â”€â”€â”€æç”»â”€â”€â”€â†’â”‚ - ãƒãƒƒãƒ•ã‚¡ç®¡ç†  â”‚          â”‚
â”‚  â”‚ - ç‰©ç†æ¼”ç®—        â”‚   ãƒ‡ãƒ¼ã‚¿   â”‚ - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³  â”‚          â”‚
â”‚  â”‚ - è² è·è¨ˆç®—        â”‚            â”‚                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                           â”‚                     â”‚
â”‚                                           â–¼                     â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                                  â”‚   shader.wgsl    â”‚          â”‚
â”‚                                  â”‚ (é ‚ç‚¹/ãƒ•ãƒ©ã‚°)    â”‚          â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
JavaScript (Frontend)
       â”‚
       â”‚ wasm_bindgen
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        WASM Module                            â”‚
â”‚                                                               â”‚
â”‚  1. init_gpu(canvas_id)     â†’ WebGPUåˆæœŸåŒ–                   â”‚
â”‚  2. create_simulation(max)  â†’ SimulationStateä½œæˆ            â”‚
â”‚  3. load_stage_config(json) â†’ ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šãƒ­ãƒ¼ãƒ‰             â”‚
â”‚  4. simulation_tick(delta)  â†’ æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°                 â”‚
â”‚  5. trigger_waves_until(t)  â†’ Waveç™ºç«                       â”‚
â”‚  6. render_simulation_frame()â†’ æç”»                          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ä¸»è¦ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### Packetï¼ˆãƒ‘ã‚±ãƒƒãƒˆï¼‰

```rust
pub struct Packet {
    pub x: f32,              // Xåº§æ¨™
    pub y: f32,              // Yåº§æ¨™
    pub velocity_x: f32,     // Xæ–¹å‘é€Ÿåº¦ï¼ˆåº§æ¨™æŒ‡å®šãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
    pub velocity_y: f32,     // Yæ–¹å‘é€Ÿåº¦ï¼ˆåº§æ¨™æŒ‡å®šãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
    pub active: u32,         // 0: éã‚¢ã‚¯ãƒ†ã‚£ãƒ–, 1: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–
    pub packet_type: u32,    // PacketTypeï¼ˆ0-3ï¼‰
    pub complexity: u8,      // å‡¦ç†ã®é‡ã•ä¿‚æ•°
    pub target_node_idx: i32,// ç›®æ¨™ãƒãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆ-1 = å®›å…ˆãªã—ï¼‰
    pub speed: f32,          // ç§»å‹•é€Ÿåº¦ï¼ˆãƒ”ã‚¯ã‚»ãƒ«/ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰
    pub state: PacketState,  // Moving / Processing / Queued
    pub current_node_idx: i32,// ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ï¼ˆ-1 = ç§»å‹•ä¸­ï¼‰
}
```

### PacketTypeï¼ˆãƒ‘ã‚±ãƒƒãƒˆã‚¿ã‚¤ãƒ—ï¼‰

| å€¤ | åç§° | èª¬æ˜ |
|---|------|------|
| 0 | Normal | é€šå¸¸ãƒ‘ã‚±ãƒƒãƒˆ |
| 1 | SynFlood | SYN Floodæ”»æ’ƒ |
| 2 | HeavyTask | é‡ã„å‡¦ç†ã‚¿ã‚¹ã‚¯ |
| 3 | Killer | ã‚·ã‚¹ãƒ†ãƒ ã‚­ãƒ©ãƒ¼ |

### PacketStateï¼ˆãƒ‘ã‚±ãƒƒãƒˆçŠ¶æ…‹ï¼‰

| å€¤ | åç§° | èª¬æ˜ |
|---|------|------|
| 0 | Moving | ç§»å‹•ä¸­ï¼ˆãƒãƒ¼ãƒ‰é–“ã‚’ç§»å‹•ï¼‰ |
| 1 | Processing | ãƒãƒ¼ãƒ‰ã§å‡¦ç†ä¸­ |
| 2 | Queued | ãƒãƒ¼ãƒ‰ã®ã‚­ãƒ¥ãƒ¼ã§å¾…æ©Ÿä¸­ |

### Nodeï¼ˆãƒãƒ¼ãƒ‰ï¼‰

```rust
pub struct Node {
    pub x: f32,              // Xåº§æ¨™
    pub y: f32,              // Yåº§æ¨™
    pub id: u32,             // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
    pub node_type: u32,      // NodeTypeï¼ˆ0-3ï¼‰
    pub spec: NodeSpec,      // æ€§èƒ½ã‚¹ãƒšãƒƒã‚¯
    // å‹•çš„çŠ¶æ…‹
    pub processing_packets: Vec<ProcessingPacket>, // å‡¦ç†ä¸­ãƒ‘ã‚±ãƒƒãƒˆ
    pub queue: Vec<QueuedPacket>,                  // å¾…æ©Ÿã‚­ãƒ¥ãƒ¼
    pub total_processed: u32,                      // å‡¦ç†å®Œäº†æ•°
    pub total_dropped: u32,                        // ãƒ‰ãƒ­ãƒƒãƒ—æ•°
}
```

### NodeTypeï¼ˆãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ï¼‰

| å€¤ | åç§° | è‰² | èª¬æ˜ |
|---|------|-----|------|
| 0 | Gateway | ç·‘ `#238636` | ãƒ‘ã‚±ãƒƒãƒˆã®å…¥å£ |
| 1 | LB | é’ `#1f6feb` | ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ |
| 2 | Server | ç´« `#8957e5` | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ |
| 3 | DB | ã‚ªãƒ¬ãƒ³ã‚¸ `#f0883e` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |

### NodeSpecï¼ˆãƒãƒ¼ãƒ‰ã‚¹ãƒšãƒƒã‚¯ï¼‰

```rust
pub struct NodeSpec {
    pub max_concurrent: u32,   // åŒæ™‚å‡¦ç†å¯èƒ½æ•°
    pub process_time_ms: f64,  // 1ãƒ‘ã‚±ãƒƒãƒˆã®å‡¦ç†æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰
    pub queue_capacity: u32,   // å¾…æ©Ÿã‚­ãƒ¥ãƒ¼å®¹é‡
    pub cost: u32,             // é…ç½®ã‚³ã‚¹ãƒˆ
}
```

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ãƒšãƒƒã‚¯:**

| NodeType | max_concurrent | process_time_ms | queue_capacity | cost |
|----------|----------------|-----------------|----------------|------|
| Gateway | 10,000 | 0.0 | 10,000 | 0 |
| LB | 100 | 10.0 | 500 | 100 |
| Server | 20 | 50.0 | 50 | 150 |
| DB | 10 | 30.0 | 100 | 200 |

---

## ğŸ¯ å‡¦ç†ãƒ•ãƒ­ãƒ¼è©³ç´°

### 1. ãƒ‘ã‚±ãƒƒãƒˆç”Ÿæˆï¼ˆspawn_waveï¼‰

```
spawn_wave_to_node()
    â”‚
    â–¼
SpawnTask ã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ 
    â”‚
    â–¼ tick() å†…ã§å‡¦ç†
    â”‚
process_spawn_queue()
    â”‚
    â”œâ”€ çµŒéæ™‚é–“ã«å¿œã˜ã¦ç”Ÿæˆæ•°ã‚’è¨ˆç®—
    â”‚
    â””â”€ ç©ºãã‚¹ãƒ­ãƒƒãƒˆã« Packet ã‚’ç”Ÿæˆ
        â””â”€ target_node_idx è¨­å®š
        â””â”€ speed è¨­å®šï¼ˆãƒãƒ©ã¤ãã‚ã‚Šï¼‰
```

### 2. ãƒ‘ã‚±ãƒƒãƒˆç§»å‹•ï¼ˆupdate_packetsï¼‰

```
tick()
    â”‚
    â–¼
update_packets()
    â”‚
    â”œâ”€ state == Moving ã®ãƒ‘ã‚±ãƒƒãƒˆã®ã¿å‡¦ç†
    â”‚
    â”œâ”€ target_node_idx >= 0 ã®å ´åˆï¼ˆãƒãƒ¼ãƒ‰æŒ‡å®šãƒ¢ãƒ¼ãƒ‰ï¼‰
    â”‚   â”‚
    â”‚   â”œâ”€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã¸ã®æ–¹å‘ãƒ™ã‚¯ãƒˆãƒ«è¨ˆç®—
    â”‚   â”‚
    â”‚   â””â”€ è·é›¢ < 5.0 ãªã‚‰åˆ°é”åˆ¤å®š
    â”‚       â””â”€ handle_packet_arrival()
    â”‚
    â””â”€ target_node_idx == -1 ã®å ´åˆï¼ˆåº§æ¨™æŒ‡å®šãƒ¢ãƒ¼ãƒ‰ï¼‰
        â””â”€ velocity_x/y ã§ç§»å‹•
```

### 3. ãƒãƒ¼ãƒ‰åˆ°é”å‡¦ç†ï¼ˆhandle_packet_arrivalï¼‰

```
handle_packet_arrival(packet_idx)
    â”‚
    â–¼
ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰å–å¾—
    â”‚
    â”œâ”€ process_time == 0ï¼ˆGatewayãªã©ï¼‰
    â”‚   â””â”€ å³åº§ã« route_packet_to_next()
    â”‚
    â””â”€ process_time > 0
        â”‚
        â”œâ”€ current_processing < max_concurrent
        â”‚   â””â”€ ProcessingçŠ¶æ…‹ã«ç§»è¡Œ
        â”‚   â””â”€ processing_packets ã«è¿½åŠ 
        â”‚
        â”œâ”€ queue.len() < queue_capacity
        â”‚   â””â”€ QueuedçŠ¶æ…‹ã«ç§»è¡Œ
        â”‚   â””â”€ queue ã«è¿½åŠ 
        â”‚
        â””â”€ elseï¼ˆå®¹é‡ã‚ªãƒ¼ãƒãƒ¼ï¼‰
            â””â”€ ãƒ‰ãƒ­ãƒƒãƒ—ï¼
            â””â”€ stats.packets_dropped++
```

### 4. ãƒãƒ¼ãƒ‰å‡¦ç†æ™‚é–“é€²è¡Œï¼ˆprocess_nodesï¼‰

```
process_nodes(delta_ms)
    â”‚
    â–¼
å„ãƒãƒ¼ãƒ‰ã® processing_packets ã‚’å‡¦ç†
    â”‚
    â”œâ”€ remaining_time_ms -= delta_ms
    â”‚
    â”œâ”€ remaining_time <= 0 ã®å ´åˆ
    â”‚   â””â”€ å‡¦ç†å®Œäº† â†’ route_packet_to_next()
    â”‚
    â””â”€ ç©ºããŒã‚ã‚Œã°ã‚­ãƒ¥ãƒ¼ã‹ã‚‰æ¬¡ã®ãƒ‘ã‚±ãƒƒãƒˆã‚’å‡¦ç†é–‹å§‹
```

### 5. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆroute_packet_to_nextï¼‰

```
route_packet_to_next()
    â”‚
    â–¼
ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’ãƒã‚§ãƒƒã‚¯
    â”‚
    â”œâ”€ Gateway(0) â†’ LB(1) ã‚’æ¢ã™
    â”œâ”€ LB(1)      â†’ æœ€ã‚‚è² è·ã®ä½ã„ Server(2) ã‚’é¸æŠ
    â”œâ”€ Server(2)  â†’ DB(3) ã‚’æ¢ã™
    â””â”€ DB(3)      â†’ å‡¦ç†å®Œäº†ï¼
                    â””â”€ stats.packets_processed++
```

### ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```rust
fn find_next_server_target(&self) -> Option<usize> {
    // Server ãƒãƒ¼ãƒ‰ã‚’åé›†
    let servers: Vec<(usize, f32)> = self.nodes
        .iter()
        .enumerate()
        .filter(|(_, node)| node.node_type == 2)
        .map(|(i, node)| {
            // è² è·ç‡ = (å‡¦ç†ä¸­ + ã‚­ãƒ¥ãƒ¼) / max_concurrent
            let load = (node.processing_packets.len() + node.queue.len()) as f32
                / node.spec.max_concurrent.max(1) as f32;
            (i, load)
        })
        .collect();

    // æœ€ã‚‚è² è·ã®ä½ã„ã‚µãƒ¼ãƒãƒ¼ã‚’é¸æŠ
    servers.iter()
        .min_by(|a, b| a.1.partial_cmp(&b.1).unwrap())
        .map(|(idx, _)| *idx)
}
```

---

## ğŸ¨ WebGPUæç”»ã‚·ã‚¹ãƒ†ãƒ 

### æç”»ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    render_simulation_frame()               â”‚
â”‚                                                            â”‚
â”‚  1. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰                                   â”‚
â”‚     â””â”€ [x, y, r, g, b, size] Ã— ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ•°               â”‚
â”‚                                                            â”‚
â”‚  2. GPUãƒãƒƒãƒ•ã‚¡ã«æ›¸ãè¾¼ã¿                                    â”‚
â”‚     â””â”€ queue.write_buffer()                                â”‚
â”‚                                                            â”‚
â”‚  3. ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ã‚¹å®Ÿè¡Œ                                        â”‚
â”‚     â””â”€ render_pass.draw(0..4, 0..entity_count)             â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿å½¢å¼

å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯6ã¤ã®floatå€¤ã§æ§‹æˆï¼š

```
[x, y, r, g, b, size]
 â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â”‚
 â”‚  â”‚     â”‚     â””â”€ ã‚µã‚¤ã‚ºï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰
 â”‚  â”‚     â””â”€ RGBè‰²ï¼ˆ0.0-1.0ï¼‰
 â””â”€â”€â”´â”€ åº§æ¨™ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰
```

### æç”»é †åº

1. **ãƒãƒ¼ãƒ‰å¤–å´ï¼ˆç¸ï¼‰** - è² è·è‰²ï¼ˆç·‘â†’é»„â†’ã‚ªãƒ¬ãƒ³ã‚¸â†’èµ¤ï¼‰
2. **ãƒãƒ¼ãƒ‰å†…å´** - ã‚¿ã‚¤ãƒ—è‰²
3. **ãƒ‘ã‚±ãƒƒãƒˆ** - ç™½è‰²

### è² è·è‰²è¨ˆç®—

```rust
fn load_rate_to_color(load_rate: f32) -> (f32, f32, f32) {
    if load_rate <= 0.0 {
        (0.14, 0.53, 0.21)  // ç·‘
    } else if load_rate <= 0.5 {
        // ç·‘ â†’ é»„è‰² ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    } else if load_rate <= 1.0 {
        // é»„è‰² â†’ ã‚ªãƒ¬ãƒ³ã‚¸ ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    } else {
        (0.97, 0.32, 0.29)  // èµ¤ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ï¼‰
    }
}
```

### ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ï¼ˆshader.wgslï¼‰

**é ‚ç‚¹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼:**
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æç”»ï¼ˆTriangleStrip, 4é ‚ç‚¹/ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
- ã‚µã‚¤ã‚ºã«åŸºã¥ã„ã¦å››è§’å½¢ç”Ÿæˆ
- ãƒ‘ã‚±ãƒƒãƒˆï¼ˆsize < 10ï¼‰ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ

**ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼:**
- å˜ç´”ãªã‚«ãƒ©ãƒ¼å‡ºåŠ›

---

## ğŸ“¡ ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šAPI

### StageConfig JSONå½¢å¼

```json
{
  "meta": {
    "title": "Stage 1",
    "description": "èª¬æ˜æ–‡",
    "budget": 1000,
    "sla_target": 0.95
  },
  "grades": {
    "lb": {
      "basic": { "max_concurrent": 50, "process_time_ms": 15, "queue_capacity": 200, "cost": 80 }
    },
    "server": {
      "medium": { "max_concurrent": 20, "process_time_ms": 50, "queue_capacity": 50, "cost": 150 }
    },
    "db": {
      "standard": { "max_concurrent": 10, "process_time_ms": 30, "queue_capacity": 100, "cost": 200 }
    }
  },
  "map": {
    "fixed_nodes": [
      { "id": "gateway", "type": "gateway", "x": 100, "y": 540 },
      { "id": "lb1", "type": "lb", "grade": "basic", "x": 400, "y": 540 }
    ]
  },
  "waves": [
    {
      "time_start_ms": 0,
      "source_id": "gateway",
      "count": 100,
      "duration_ms": 5000,
      "packet_type": "NORMAL",
      "speed": 3.0
    }
  ]
}
```

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰é–¢æ•°

```typescript
// ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šã‚’ãƒ­ãƒ¼ãƒ‰ï¼ˆå›ºå®šãƒãƒ¼ãƒ‰ã‚’é…ç½®ã€Waveæƒ…å ±ã‚’ä¿æŒï¼‰
load_stage_config(json_str: string): boolean

// ãƒ¡ã‚¿æƒ…å ±å–å¾—
get_stage_meta(): string | undefined  // JSONæ–‡å­—åˆ—
get_stage_budget(): number
get_stage_sla_target(): number

// Waveç™ºç«ï¼ˆcurrent_timeã¾ã§ã®æœªç™ºç«Waveã‚’ç™ºç«ï¼‰
trigger_waves_until(current_time_ms: number): void

// æ®‹ã‚ŠWaveæ•°
get_pending_wave_count(): number

// Waveã‚’å†ãƒ­ãƒ¼ãƒ‰
reset_stage_waves(): void
```

---

## ğŸ”§ JavaScript API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### åˆæœŸåŒ–

```typescript
// WASMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆæœŸåŒ–ï¼ˆè‡ªå‹•å®Ÿè¡Œï¼‰
main(): void

// WebGPUåˆæœŸåŒ–
init_gpu(canvas_id: string): Promise<boolean>

// ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
create_simulation(max_packets: number): void
```

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ“ä½œ

```typescript
// æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°
simulation_tick(delta_ms: number): void

// æç”»
render_simulation_frame(): void

// ãƒªã‚»ãƒƒãƒˆ
simulation_reset(): void
```

### ãƒãƒ¼ãƒ‰ç®¡ç†

```typescript
// ãƒãƒ¼ãƒ‰è¿½åŠ 
simulation_add_node(id: number, x: number, y: number, node_type: number): void

// ã‚¹ãƒšãƒƒã‚¯ä»˜ããƒãƒ¼ãƒ‰è¿½åŠ 
simulation_add_node_with_spec(
  id: number, x: number, y: number, node_type: number,
  max_concurrent: number, process_time_ms: number,
  queue_capacity: number, cost: number
): void

// ãƒãƒ¼ãƒ‰ã‚¯ãƒªã‚¢
simulation_clear_nodes(): void

// ãƒãƒ¼ãƒ‰æ•°å–å¾—
simulation_get_node_count(): number

// ãƒãƒ¼ãƒ‰ä½ç½®æ›´æ–°
simulation_update_node_position(id: number, x: number, y: number): void

// ãƒãƒ¼ãƒ‰ä½ç½®å–å¾—
simulation_get_node_position(index: number): Float32Array // [x, y]
```

### ãƒ‘ã‚±ãƒƒãƒˆç”Ÿæˆ

```typescript
// åº§æ¨™æŒ‡å®šãƒ¢ãƒ¼ãƒ‰
simulation_spawn_wave(
  x: number, y: number,
  target_x: number, target_y: number,
  count: number, duration_ms: number,
  base_speed: number, speed_variance: number,
  packet_type: number, complexity: number
): void

// ãƒãƒ¼ãƒ‰æŒ‡å®šãƒ¢ãƒ¼ãƒ‰
simulation_spawn_wave_to_node(
  x: number, y: number,
  target_node_idx: number,
  count: number, duration_ms: number,
  base_speed: number, speed_variance: number,
  packet_type: number, complexity: number
): void

// ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆãƒ©ãƒ³ãƒ€ãƒ æ–¹å‘ï¼‰
simulation_debug_spawn(x: number, y: number, count: number): void
```

### çµ±è¨ˆå–å¾—

```typescript
simulation_get_active_count(): number    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ‘ã‚±ãƒƒãƒˆæ•°
simulation_get_stats_spawned(): number   // ç”Ÿæˆæ¸ˆã¿ç·æ•°
simulation_get_stats_processed(): number // å‡¦ç†å®Œäº†æ•°
simulation_get_stats_dropped(): number   // ãƒ‰ãƒ­ãƒƒãƒ—æ•°
simulation_get_current_time(): number    // çµŒéæ™‚é–“(ms)
```

### ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆWebSocketç”¨ï¼‰

```typescript
// ãƒã‚¤ãƒŠãƒªãƒ‘ã‚±ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†
handle_binary(data: Uint8Array): void

// JSONãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†
handle_message(message: string): void

// å…±æœ‰ãƒãƒƒãƒ•ã‚¡ç®¡ç†
allocate_packet_buffer(capacity: number): void
update_packet_buffer_from_binary(data: Uint8Array): number
update_packet_buffer_from_json(json_data: string): number
get_packet_buffer_ptr(): number
get_packet_buffer_len(): number
get_memory(): WebAssembly.Memory
```

---

## ğŸ› ï¸ ãƒ“ãƒ«ãƒ‰æ–¹æ³•

### å‰ææ¡ä»¶

- Rust (1.70+)
- wasm-pack
- wasm32-unknown-unknown ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ

```bash
# ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¿½åŠ ï¼ˆåˆå›ã®ã¿ï¼‰
rustup target add wasm32-unknown-unknown

# wasm-packã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
cargo install wasm-pack
```

### ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºãƒ“ãƒ«ãƒ‰
wasm-pack build --target web --dev

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ï¼ˆæœ€é©åŒ–æ¸ˆã¿ï¼‰
wasm-pack build --target web --release

# npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦å‡ºåŠ›
wasm-pack build --target bundler
```

### å‡ºåŠ›å…ˆ

- `simulation/pkg/` - ãƒ“ãƒ«ãƒ‰æˆæœç‰©

---

## ğŸ” ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°

Rustã‹ã‚‰`console.log`ã‚’å‘¼ã³å‡ºã—:

```rust
log(&format!("[Rust/Wasm] Debug: value={}", some_value));
```

ãƒ–ãƒ©ã‚¦ã‚¶ã®DevToolsã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªå¯èƒ½ã€‚

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬

```rust
let start = now();
// å‡¦ç†
let elapsed = now() - start;
log(&format!("Processing took {:.2}ms", elapsed));
```

### å…±é€šã®å•é¡Œã¨è§£æ±ºç­–

| å•é¡Œ | åŸå›  | è§£æ±ºç­– |
|------|------|--------|
| WebGPUåˆæœŸåŒ–å¤±æ•— | ãƒ–ãƒ©ã‚¦ã‚¶éå¯¾å¿œ | Chrome/Edgeæœ€æ–°ç‰ˆã‚’ä½¿ç”¨ |
| ãƒ‘ã‚±ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ | `create_simulation`æœªå®Ÿè¡Œ | åˆæœŸåŒ–é †åºã‚’ç¢ºèª |
| ãƒãƒ¼ãƒ‰ãŒãªã„ | `load_stage_config`æœªå®Ÿè¡Œ | ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šã‚’ãƒ­ãƒ¼ãƒ‰ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ | ãƒ‘ã‚±ãƒƒãƒˆéå¤š | `max_packets`ã‚’èª¿æ•´ |

---

## ğŸ“ å®šæ•°ä¸€è¦§

| å®šæ•° | å€¤ | èª¬æ˜ |
|------|-----|------|
| `WIDTH` | 1920.0 | ã‚­ãƒ£ãƒ³ãƒã‚¹å¹…ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰ |
| `HEIGHT` | 1080.0 | ã‚­ãƒ£ãƒ³ãƒã‚¹é«˜ã•ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰ |
| `MAX_PACKETS` | 100,000 | æœ€å¤§æç”»ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ•° |
| `BG_COLOR` | `#0d0d17` | èƒŒæ™¯è‰² |
| ãƒ‘ã‚±ãƒƒãƒˆã‚µã‚¤ã‚º | 3.0 | ãƒ‘ã‚±ãƒƒãƒˆæç”»ã‚µã‚¤ã‚º |
| ãƒãƒ¼ãƒ‰å¤–å´ã‚µã‚¤ã‚º | 24.0 | ãƒãƒ¼ãƒ‰ç¸ã®æç”»ã‚µã‚¤ã‚º |
| ãƒãƒ¼ãƒ‰å†…å´ã‚µã‚¤ã‚º | 16.0 | ãƒãƒ¼ãƒ‰æœ¬ä½“ã®æç”»ã‚µã‚¤ã‚º |
| åˆ°é”åˆ¤å®šè·é›¢ | 5.0 | ãƒãƒ¼ãƒ‰ã¸ã®åˆ°é”åˆ¤å®šè·é›¢ |

---

## ğŸ”— ä¾å­˜é–¢ä¿‚

### Cargo.toml

```toml
[dependencies]
wasm-bindgen = "0.2"           # JS/WASMç›¸äº’é‹ç”¨
wasm-bindgen-futures = "0.4"   # async/awaitå¯¾å¿œ
js-sys = "0.3"                 # JSãƒ“ãƒ«ãƒˆã‚¤ãƒ³é–¢æ•°
web-sys = "0.3"                # Web APIï¼ˆCanvas, Consoleç­‰ï¼‰
wgpu = "24.0"                  # WebGPUæŠ½è±¡åŒ–
bytemuck = "1.14"              # ãƒã‚¤ãƒˆå¤‰æ›ï¼ˆPod/Zeroableï¼‰
serde = "1.0"                  # ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
serde_json = "1.0"             # JSONå‡¦ç†
```

### ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–

```toml
[profile.release]
opt-level = "s"    # ã‚µã‚¤ã‚ºæœ€é©åŒ–
lto = true         # Link-Time Optimization
```

---

## ğŸ“ ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—

```typescript
import init, {
  init_gpu,
  create_simulation,
  load_stage_config,
  simulation_tick,
  trigger_waves_until,
  render_simulation_frame,
} from './simulation';

async function main() {
  // 1. WASMåˆæœŸåŒ–
  await init();
  
  // 2. WebGPUåˆæœŸåŒ–
  await init_gpu('game-canvas');
  
  // 3. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
  create_simulation(10000);
  
  // 4. ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šãƒ­ãƒ¼ãƒ‰
  const stageConfig = await fetch('/api/stages/1').then(r => r.json());
  load_stage_config(JSON.stringify(stageConfig));
  
  // 5. ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
  let lastTime = performance.now();
  
  function gameLoop() {
    const now = performance.now();
    const delta = now - lastTime;
    lastTime = now;
    
    // Waveç™ºç«
    trigger_waves_until(simulation_get_current_time());
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
    simulation_tick(delta);
    
    // æç”»
    render_simulation_frame();
    
    requestAnimationFrame(gameLoop);
  }
  
  gameLoop();
}

main();
```

---

## ğŸ® ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—åˆ¥ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              Gateway (0)                â”‚
              â”‚  å‡¦ç†æ™‚é–“: 0msï¼ˆé€šéã®ã¿ï¼‰               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚           Load Balancer (1)             â”‚
              â”‚  å‡¦ç†æ™‚é–“: 10ms                          â”‚
              â”‚  â†“ æœ€ã‚‚è² è·ã®ä½ã„Serverã¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Server A (2) â”‚  â”‚   Server B (2)   â”‚
            â”‚   å‡¦ç†æ™‚é–“: 50msâ”‚  â”‚   å‡¦ç†æ™‚é–“: 50ms â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              Database (3)               â”‚
              â”‚  å‡¦ç†æ™‚é–“: 30ms                          â”‚
              â”‚  â†“ å‡¦ç†å®Œäº†ï¼                            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆé–‹ç™ºæ™‚ï¼‰

- [ ] `wasm-pack build`ãŒæˆåŠŸã™ã‚‹
- [ ] `pkg/`ãƒ•ã‚©ãƒ«ãƒ€ãŒç”Ÿæˆã•ã‚Œã‚‹
- [ ] TypeScriptå‹å®šç¾©ãŒæ­£ã—ã„
- [ ] WebGPUãŒåˆæœŸåŒ–ã§ãã‚‹
- [ ] ãƒ‘ã‚±ãƒƒãƒˆãŒæç”»ã•ã‚Œã‚‹
- [ ] ãƒãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è² è·è‰²ãŒå¤‰åŒ–ã™ã‚‹
- [ ] çµ±è¨ˆãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [WebGPUä»•æ§˜](https://www.w3.org/TR/webgpu/)
- [wasm-bindgen Guide](https://rustwasm.github.io/wasm-bindgen/)
- [wgpu-rs Documentation](https://docs.rs/wgpu/)

